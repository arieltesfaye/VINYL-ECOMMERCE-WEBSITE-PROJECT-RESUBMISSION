<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eternal Records</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    {% load static %}
    <link rel="stylesheet" href="{% static 'store/css/cart.css' %}">

</head>

<body>
  
    <section id="header">
        <a href="index.html">
            <img src="{% static 'store/images/icons/erecords-logo-transparent.png' %}" class="logo" alt="Eternal Records Logo">
        </a>
        <div>
            <ul id="navbar">
                <li><a href="{% url 'index' %}">Vinyl</a></li>
                <li><a href="{% url 'cassetteplayers' %}">Cassette Players</a></li>
                <li><a href="{% url 'about' %}">About</a></li>
                <li><a href="{% url 'cart' %}">Cart</a></li>
                <li><a href="{% url 'login' %}">Login</a></li>
            </ul>
        </div>
        
    </section>

    <!-- Cart Section -->
    <div class="cart-section">
        <h2 class="section-title">Your Cart</h2>
        <div class="cart-items">
            
            <div class="cart-item">
                <img src="{% static 'store/images/album covers/Hot New Vinyls/little-dark-age-MGMT.jpg' %}" alt="Little Dark Age - MGMT" class="cart-item-img">
                <div class="cart-item-details">
                    <h5>Little Dark Age</h5>
                    <p>KSh4,600.00</p>
                    <a href="#" class="remove-item">Remove</a>
                </div>
            </div>

            <div class="cart-item">
                <img src="{% static 'store/images/album covers/Hot New Vinyls/igor Tyler, The Creator.jpg' %}" alt="IGOR - Tyler, The Creator" class="cart-item-img">
                <div class="cart-item-details">
                    <h5>IGOR</h5>
                    <p>KSh4,900.00</p>
                    <a href="#" class="remove-item">Remove</a>
                </div>
            </div>

            <div class="cart-item">
                <img src="{% static 'store/images/album covers/Hot New Vinyls/cowboy-carter-Beyonce.jpg' %}" alt="Cowboy Carter - BeyoncÃ©" class="cart-item-img">
                <div class="cart-item-details">
                    <h5>Cowboy Carter</h5>
                    <p>KSh5,500.00</p>
                    <a href="#" class="remove-item">Remove</a>
                </div>
            </div>

            <div class="cart-item">
                <img src="{% static 'store/images/album covers/Hot New Vinyls/caprisongs-FKA Twigz.jpg' %}" alt="Caprisongs - FKA Twigs" class="cart-item-img">
                <div class="cart-item-details">
                    <h5>Caprisongs</h5>
                    <p>KSh4,500.00</p>
                    <a href="#" class="remove-item">Remove</a>
                </div>
            </div>

            <div class="cart-item">
                <img src="{% static 'store/images/album covers/Hot New Vinyls/ANTI Rihanna.jpg' %}" alt="ANTI - Rihanna" class="cart-item-img">
                <div class="cart-item-details">
                    <h5>ANTI</h5>
                    <p>KSh5,200.00</p>
                    <a href="#" class="remove-item">Remove</a>
                </div>
            </div>
        </div>
        <div class="cart-total">
            <h3>Total: KSh24,700.00</h3>

            <!-- PayPal Payment Button -->
            <div id="paypal-button-container"></div>

            <!-- M-Pesa Payment Button -->
            <div class="mpesa-section">
                <h4>Pay with M-Pesa</h4>
                <form id="mpesa-form">
                    <label for="phone-number">Phone Number:</label>
                    <input type="tel" id="phone-number" placeholder="07XXXXXXXX" required>
                    <button type="submit" class="checkout-btn">Pay via M-Pesa</button>
                </form>

                <form id="mpesa-form" method="POST">
                    {% csrf_token %}
                    <input type="text" id="phone-number" name="phone" placeholder="Enter your phone number">
                    <button type="submit">Pay via M-Pesa</button>
                </form>
                
            </div>

            <a href="#" class="checkout-btn">Proceed to Checkout</a>
        </div>
    </div>

    <footer>
    
        <div class="footer-content">
            <div>
                <h3>About Us</h3>
                <p>Eternal Records is your go-to destination for vinyl enthusiasts.</p>
            </div>
            <div>
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="{% url 'faq' %}">FAQs</a></li>
                    <li><a href="{% url 'policy' %}">Shipping & Refund Policy</a></li>
                </ul>
            </div>
            <div>
                <h3>Contact Us</h3>
                <p>Email: info@eternalrecords.com</p>
                <p>Phone: +1 234 567 8900</p>
            </div>
            <div>
                
                <div class="social-icons">
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-tiktok"></i></a>
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                </div>
                </div>
        </div>
        <div style="text-align: center; margin-top: 2rem;">
            &copy; 2024 Eternal Records. All rights reserved.
        </div>
    </footer>

    <!-- PayPal SDK -->
    <script src="https://www.paypal.com/sdk/js?client-id=test&currency=USD"></script>

    <!-- PayPal Button -->
    <div id="paypal-button-container"></div>

    <script>
        paypal.Buttons({
            createOrder: function(data, actions) {
                return actions.order.create({
                    purchase_units: [{
                        amount: {
                            value: '75.00' // Replace with your cart total
                        }
                    }]
                });
            },
            onApprove: function(data, actions) {
                return actions.order.capture().then(function(details) {
                    alert('Transaction completed by ' + details.payer.name.given_name);
                    // Here you can redirect to a success page or clear the cart
                });
            },
            onError: function(err) {
                alert('Error with PayPal payment');
            }
        }).render('#paypal-button-container');
    </script>


    <script>
        document.getElementById('mpesa-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const phoneNumber = document.getElementById('phone-number').value;
            const amount = 7500;  // Total amount in KSh
    
            fetch('/mpesa_checkout/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                    'X-CSRFToken': csrftoken // Send CSRF token
                },
                body: JSON.stringify({ phone: phoneNumber, amount: amount })
            })
            .then(response => response.json())
            .then(data => {
                if (data.ResponseCode === '0') {
                    alert('Payment request sent. Complete the payment on your phone.');
                } else {
                    alert('Error processing payment. Please try again.');
                }
            })
            .catch(error => {
                alert('An error occurred: ' + error);
            });
        });
    </script>
    
    

</body>
</html>

























